import{getTemplateHtml as t,boundAttributeSuffix as s,marker as i,rawTextElement as e,markerMatch as o}from"./get-template-html.js";import{templateFromLiterals as n}from"./template-from-literals.js";import{SVG_RESULT as r}from"./ttl.js";
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const c=document,h=()=>c.createComment(""),l=Array.isArray,a=t=>l(t)||"function"==typeof t?.[Symbol.iterator],f=new WeakMap,d=new WeakMap,p=c.createTreeWalker(c,129);class m{constructor({strings:n,_$litType$:c},l){let a;this.parts=[],console.log("creating a manual template");let f=0,d=0;const u=n.length-1,y=this.parts,[g,w]=t(n,c);if(this.el=m.createElement(g,l),p.currentNode=this.el.content,c===r){const t=this.el.content.firstChild;t.replaceWith(...t.childNodes)}for(;null!==(a=p.nextNode())&&y.length<u;){if(1===a.nodeType){if(a.hasAttributes())for(const t of a.getAttributeNames())if(t.endsWith(s)){const s=w[d++],e=a.getAttribute(t).split(i),o=/([.?@])?(.*)/.exec(s);y.push({type:1,index:f,name:o[2],strings:e,ctor:v}),a.removeAttribute(t)}else t.startsWith(i)&&(y.push({type:6,index:f}),a.removeAttribute(t));if(e.test(a.tagName)){const t=a.textContent.split(i),s=t.length-1;if(s>0){a.textContent=window.trustedTypes?window.trustedTypes.emptyScript:"";for(let i=0;i<s;i++)a.append(t[i],h()),p.nextNode(),y.push({type:2,index:++f});a.append(t[s],h())}}}else if(8===a.nodeType)if(a.data===o)y.push({type:2,index:f});else{let t=-1;for(;-1!==(t=a.data.indexOf(i,t+1));)y.push({type:7,index:f}),t+=i.length-1}f++}}static createElement(t,s){const i=c.createElement("template");return i.innerHTML=t,i}}class u{constructor(t){this._$AV=[],this._$AN=void 0,this._$AD=t}t(t){const{el:{content:s},parts:i}=this._$AD,e=(t?.creationScope??c).importNode(s,!0);p.currentNode=e;let o=p.nextNode(),n=0,r=0,h=i[0];for(;void 0!==h;){if(n===h.index){let s;2===h.type?s=new w(o,o.nextSibling,this,t):1===h.type&&(s=new h.ctor(o,h.name,h.strings,this,t)),this._$AV.push(s),h=i[++r]}n!==h?.index&&(o=p.nextNode(),n++)}return p.currentNode=c,e}}class y{constructor({strings:t,_$litType$:s},i){if(this.parts=[],console.log("creating a DOM Parts template"),this.el=n(t,s,!0),s===r){const t=this.el.content.firstChild;t.replaceWith(...t.childNodes)}const e=this.el.content.getPartRoot().getParts();let o=-1;for(const t of e)if(o++,t instanceof NodePart){let s;for(let i=0;i<t.metadata.length;i++){const e=t.metadata[i];"d"===e?(void 0!==s&&(this.parts.push(s),s=void 0),this.parts.push({type:6,index:o})):"attr"===e?(void 0!==s&&this.parts.push(s),s={type:1,index:o,name:t.metadata[++i],ctor:v,strings:[]}):'"'===e[0]&&s.strings.push(JSON.parse(e))}void 0!==s&&this.parts.push(s)}else t instanceof ChildNodePart&&this.parts.push({type:2,index:o})}}class g{constructor(t){this._$AV=[],this._$AN=void 0,this._$AD=t}t(t){const{el:{content:s},parts:i}=this._$AD,e=s.getPartRoot().clone(),o=e.getParts(),n=document.adoptNode(e.rootContainer);for(const s of i){const i=o[s.index];switch(s.type){case 2:this._$AV.push(new w(i.previousSibling,i.nextSibling,this,t));break;case 1:this._$AV.push(new s.ctor(i.node,s.name,s.strings,this,t))}}return n}}class w{get _$AU(){return this._$AM?._$AU??this._$Co}constructor(t,s,i,e){this.type=2,this._$AH="",this._$AN=void 0,this._$AA=t,this._$AB=s,this.options=e,this._$Co=e?.isConnected??!0}}class v{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(t,s,i,e,o){this.type=1,this._$AH=[],this._$AN=void 0,this.element=t,this.name=s,this._$AM=e,this.options=o,i.length>2||""!==i[0]||""!==i[1]?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=""}}export{v as AttributePart,w as ChildPart,y as DomPartsTemplate,g as DomPartsTemplateInstance,m as ManualTemplate,u as ManualTemplateInstance,d as domPartsTemplateCache,a as isIterable,f as manualTemplateCache};
//# sourceMappingURL=template.js.map
