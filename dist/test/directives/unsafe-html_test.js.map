{"version":3,"file":"unsafe-html_test.js","sourceRoot":"","sources":["../../../src/test/directives/unsafe-html_test.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\n\nimport {unsafeHTML} from '../../directives/unsafe-html.js';\nimport {render, html, nothing, noChange} from '../../index.js';\nimport {assert} from '@esm-bundle/chai';\nimport {makeAsserts} from '../test-utils/assert-render.js';\n\nsuite('unsafeHTML directive', () => {\n  let container: HTMLElement;\n\n  setup(() => {\n    container = document.createElement('div');\n  });\n\n  const {assertContent} = makeAsserts(() => container);\n\n  test('renders HTML', () => {\n    render(\n      html`<div>before${unsafeHTML('<span>inner</span>after')}</div>`,\n      container\n    );\n    assertContent('<div>before<span>inner</span>after</div>');\n  });\n\n  test('rendering `nothing` renders empty string to content', () => {\n    render(html`<div>before${unsafeHTML(nothing)}after</div>`, container);\n    assertContent('<div>beforeafter</div>');\n  });\n\n  test('rendering `noChange` does not change the previous content', () => {\n    const template = (v: string | typeof noChange) =>\n      html`<div>before${unsafeHTML(v)}after</div>`;\n    render(template('<p>Hi</p>'), container);\n    assertContent('<div>before<p>Hi</p>after</div>');\n    render(template(noChange), container);\n    assertContent('<div>before<p>Hi</p>after</div>');\n  });\n\n  test('rendering `undefined` renders empty string to content', () => {\n    render(html`<div>before${unsafeHTML(undefined)}after</div>`, container);\n    assertContent('<div>beforeafter</div>');\n  });\n\n  test('rendering `null` renders empty string to content', () => {\n    render(html`<div>before${unsafeHTML(null)}after</div>`, container);\n    assertContent('<div>beforeafter</div>');\n  });\n\n  test('dirty checks primitive values', () => {\n    const value = 'aaa';\n    const t = () => html`<div>${unsafeHTML(value)}</div>`;\n\n    // Initial render\n    render(t(), container);\n    assertContent('<div>aaa</div>');\n\n    // Modify instance directly. Since lit-html doesn't dirty check against\n    // actual DOM, but against previous part values, this modification should\n    // persist through the next render if dirty checking works.\n    const text = container.querySelector('div')!.childNodes[1] as Text;\n    text.textContent = 'bbb';\n    assertContent('<div>bbb</div>', 'A');\n\n    // Re-render with the same value\n    render(t(), container);\n\n    assertContent('<div>bbb</div>', 'B');\n    const text2 = container.querySelector('div')!.childNodes[1] as Text;\n    assert.strictEqual(text, text2);\n  });\n\n  test('throws on non-string values', () => {\n    const value = ['aaa'];\n    const t = () => html`<div>${unsafeHTML(value as any)}</div>`;\n    assert.throws(() => render(t(), container));\n  });\n\n  test('renders after other values', () => {\n    const value = '<span></span>';\n    const primitive = 'aaa';\n    const t = (content: any) => html`<div>${content}</div>`;\n\n    // Initial unsafeHTML render\n    render(t(unsafeHTML(value)), container);\n    assertContent('<div><span></span></div>');\n\n    // Re-render with a non-unsafeHTML value\n    render(t(primitive), container);\n    assertContent('<div>aaa</div>');\n\n    // Re-render with unsafeHTML again\n    render(t(unsafeHTML(value)), container);\n    assertContent('<div><span></span></div>');\n  });\n});\n"]}