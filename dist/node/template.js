import{getTemplateHtml as t,boundAttributeSuffix as s,marker as i,rawTextElement as e,markerMatch as o}from"./get-template-html.js";import{templateFromLiterals as n}from"./template-from-literals.js";import{SVG_RESULT as r}from"./ttl.js";
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const c=document,l=()=>c.createComment(""),h=Array.isArray,a=t=>h(t)||"function"==typeof t?.[Symbol.iterator],f=c.createTreeWalker(c,129);class p{constructor({strings:n,_$litType$:h},a){let p;this.parts=[],console.log("creating a manual template");let d=0,m=0;const y=n.length-1,u=this.parts,[x,g]=t(n,h),v=c.createElement("template");if(v.innerHTML=x,this.el=v,f.currentNode=this.el.content,h===r){const t=this.el.content.firstChild;t.replaceWith(...t.childNodes)}for(;null!==(p=f.nextNode())&&u.length<y;){if(1===p.nodeType){if(p.hasAttributes())for(const t of p.getAttributeNames())if(t.endsWith(s)){const s=g[m++],e=p.getAttribute(t).split(i),o=/([.?@])?(.*)/.exec(s);u.push({type:1,index:d,name:o[2],strings:e,ctor:w}),p.removeAttribute(t)}else t.startsWith(i)&&(u.push({type:6,index:d}),p.removeAttribute(t));if(e.test(p.tagName)){const t=p.textContent.split(i),s=t.length-1;if(s>0){p.textContent=window.trustedTypes?window.trustedTypes.emptyScript:"";for(let i=0;i<s;i++)p.append(t[i],l()),f.nextNode(),u.push({type:2,index:++d});p.append(t[s],l())}}}else if(8===p.nodeType)if(p.data===o)u.push({type:2,index:d});else{let t=-1;for(;-1!==(t=p.data.indexOf(i,t+1));)u.push({type:7,index:d}),t+=i.length-1}d++}}}class d{constructor(t){this.parts=[],this.template=t}clone(t){const{el:{content:s},parts:i}=this.template,e=(t?.creationScope??c).importNode(s,!0);f.currentNode=e;let o=f.nextNode(),n=0,r=0,l=i[0];for(;void 0!==l;){if(n===l.index){let s;2===l.type?s=new u(o,o.nextSibling,this,t):1===l.type&&(s=new l.ctor(o,l.name,l.strings)),this.parts.push(s),l=i[++r]}n!==l?.index&&(o=f.nextNode(),n++)}return f.currentNode=c,e}}class m{constructor({strings:t,_$litType$:s},i){if(this.parts=[],console.log("creating a DOM Parts template"),this.el=n(t,s,!0),s===r){const t=this.el.content.firstChild;t.replaceWith(...t.childNodes)}const e=this.el.content.getPartRoot().getParts();let o=-1;for(const t of e)if(o++,t instanceof NodePart){let s;for(let i=0;i<t.metadata.length;i++){const e=t.metadata[i];"d"===e?(void 0!==s&&(this.parts.push(s),s=void 0),this.parts.push({type:6,index:o})):"attr"===e?(void 0!==s&&this.parts.push(s),s={type:1,index:o,name:t.metadata[++i],ctor:w,strings:[]}):'"'===e[0]&&s.strings.push(JSON.parse(e))}void 0!==s&&this.parts.push(s)}else t instanceof ChildNodePart&&this.parts.push({type:2,index:o})}}class y{constructor(t){this.parts=[],this.template=t}clone(t){const{el:{content:s},parts:i}=this.template,e=s.getPartRoot().clone(),o=e.getParts(),n=document.adoptNode(e.rootContainer);for(const s of i){const i=o[s.index];switch(s.type){case 2:this.parts.push(new u(i.previousSibling,i.nextSibling,this,t));break;case 1:this.parts.push(new s.ctor(i.node,s.name,s.strings))}}return n}}class u{constructor(t,s,i,e){this.type=2,this.committedValue="",this.startNode=t,this.endNode=s,this.options=e}}class w{constructor(t,s,i){this.type=1,this.value=[],this.element=t,this.name=s,i.length>2||""!==i[0]||""!==i[1]?(this.value=Array(i.length-1).fill(new String),this.strings=i):this.value=""}}export{w as AttributePart,u as ChildPart,m as DomPartsTemplate,y as DomPartsTemplateInstance,p as ManualTemplate,d as ManualTemplateInstance,a as isIterable};
//# sourceMappingURL=template.js.map
