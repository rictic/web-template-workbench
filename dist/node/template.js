import{getTemplateHtml as t,boundAttributeSuffix as s,marker as i,rawTextElement as e,markerMatch as h}from"./get-template-html.js";import{templateFromLiterals as o}from"./template-from-literals.js";import{SVG_RESULT as n}from"./ttl.js";
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const r=document,c=()=>r.createComment(""),l=t=>null===t||"object"!=typeof t&&"function"!=typeof t,a=Array.isArray,d=t=>a(t)||"function"==typeof t?.[Symbol.iterator],f=Symbol.for("lit-noChange"),m=Symbol.for("lit-nothing"),u=new WeakMap,p=new WeakMap,g=r.createTreeWalker(r,129);class y{constructor({strings:o,_$litType$:r},l){let a;this.parts=[],console.log("creating a manual template");let d=0,f=0;const m=o.length-1,u=this.parts,[p,_]=t(o,r);if(this.el=y.createElement(p,l),g.currentNode=this.el.content,r===n){const t=this.el.content.firstChild;t.replaceWith(...t.childNodes)}for(;null!==(a=g.nextNode())&&u.length<m;){if(1===a.nodeType){if(a.hasAttributes())for(const t of a.getAttributeNames())if(t.endsWith(s)){const s=_[f++],e=a.getAttribute(t).split(i),h=/([.?@])?(.*)/.exec(s);u.push({type:1,index:d,name:h[2],strings:e,ctor:x}),a.removeAttribute(t)}else t.startsWith(i)&&(u.push({type:6,index:d}),a.removeAttribute(t));if(e.test(a.tagName)){const t=a.textContent.split(i),s=t.length-1;if(s>0){a.textContent=window.trustedTypes?window.trustedTypes.emptyScript:"";for(let i=0;i<s;i++)a.append(t[i],c()),g.nextNode(),u.push({type:2,index:++d});a.append(t[s],c())}}}else if(8===a.nodeType)if(a.data===h)u.push({type:2,index:d});else{let t=-1;for(;-1!==(t=a.data.indexOf(i,t+1));)u.push({type:7,index:d}),t+=i.length-1}d++}}static createElement(t,s){const i=r.createElement("template");return i.innerHTML=t,i}}class _{constructor(t,s){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=s}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}t(t){const{el:{content:s},parts:i}=this._$AD,e=(t?.creationScope??r).importNode(s,!0);g.currentNode=e;let h=g.nextNode(),o=0,n=0,c=i[0];for(;void 0!==c;){if(o===c.index){let s;2===c.type?s=new $(h,h.nextSibling,this,t):1===c.type&&(s=new c.ctor(h,c.name,c.strings,this,t)),this._$AV.push(s),c=i[++n]}o!==c?.index&&(h=g.nextNode(),o++)}return g.currentNode=r,e}}class v{constructor({strings:t,_$litType$:s},i){if(this.parts=[],console.log("creating a DOM Parts template"),this.el=o(t,s,!0),s===n){const t=this.el.content.firstChild;t.replaceWith(...t.childNodes)}const e=this.el.content.getPartRoot().getParts();let h=-1;for(const t of e)if(h++,t instanceof NodePart){let s;for(let i=0;i<t.metadata.length;i++){const e=t.metadata[i];"d"===e?(void 0!==s&&(this.parts.push(s),s=void 0),this.parts.push({type:6,index:h})):"attr"===e?(void 0!==s&&this.parts.push(s),s={type:1,index:h,name:t.metadata[++i],ctor:x,strings:[]}):'"'===e[0]&&s.strings.push(JSON.parse(e))}void 0!==s&&this.parts.push(s)}else t instanceof ChildNodePart&&this.parts.push({type:2,index:h})}}class w{constructor(t,s){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=s}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}t(t){const{el:{content:s},parts:i}=this._$AD,e=s.getPartRoot().clone(),h=e.getParts(),o=document.adoptNode(e.rootContainer);for(const s of i){const i=h[s.index];switch(s.type){case 2:this._$AV.push(new $(i.previousSibling,i.nextSibling,this,t));break;case 1:this._$AV.push(new s.ctor(i.node,s.name,s.strings,this,t))}}return o}}class ${get _$AU(){return this._$AM?._$AU??this._$Ci}constructor(t,s,i,e){this.type=2,this._$AH=m,this._$AN=void 0,this._$AA=t,this._$AB=s,this._$AM=i,this.options=e,this._$Ci=e?.isConnected??!0}get parentNode(){let t=this._$AA.parentNode;const s=this._$AM;return void 0!==s&&11===t?.nodeType&&(t=s.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t){l(t)?t===m||null==t||""===t?(this._$AH!==m&&this._$AR(),this._$AH=m):t!==this._$AH&&t!==f&&this.o(t):void 0!==t._$litType$?this.l(t):void 0!==t.nodeType?this.h(t):d(t)?this.u(t):this.o(t)}m(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}h(t){this._$AH!==t&&(this._$AR(),this._$AH=this.m(t))}o(t){this._$AH!==m&&l(this._$AH)?this._$AA.nextSibling.data=t:this.h(r.createTextNode(t)),this._$AH=t}l(t){const s=this._$AC(t);this._$AH?._$AD===s||new(this.options?.useDomParts?w:_)(s,this).t(this.options)}_$AC(t){const s=this.options.useDomParts?p:u;let i=s.get(t.strings);if(void 0===i){const e=this.options.useDomParts?v:y;s.set(t.strings,i=new e(t))}return i}u(t){a(this._$AH)||(this._$AH=[],this._$AR());const s=this._$AH;let i,e=0;for(const h of t)e===s.length?s.push(i=new $(this.m(c()),this.m(c()),this,this.options)):i=s[e],i._$AI(h),e++;e<s.length&&(this._$AR(i&&i._$AB.nextSibling,e),s.length=e)}_$AR(t=this._$AA.nextSibling,s){for(this._$AP?.(!1,!0,s);t&&t!==this._$AB;){const s=t.nextSibling;t.remove(),t=s}}setConnected(t){void 0===this._$AM&&(this._$Ci=t,this._$AP?.(t))}}class x{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(t,s,i,e,h){this.type=1,this._$AH=m,this._$AN=void 0,this.element=t,this.name=s,this._$AM=e,this.options=h,i.length>2||""!==i[0]||""!==i[1]?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=m}_$AI(t,s,i){const e=this.strings;let h=!1;if(void 0===e)h=!l(t)||t!==this._$AH&&t!==f,h&&(this._$AH=t);else{const i=t;let o,n;for(t=e[0],o=0;o<e.length-1;o++)n=i[s+o],n===f&&(n=this._$AH[o]),h||=!l(n)||n!==this._$AH[o],n===m?t=m:t!==m&&(t+=(n??"")+e[o+1]),this._$AH[o]=n}h&&!i&&this.p(t)}p(t){t===m?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t??"")}}export{x as AttributePart,$ as ChildPart,d as isIterable,f as noChange,m as nothing};
//# sourceMappingURL=template.js.map
